{"version":3,"sources":["./src/app/Services/enviar-correo.service.ts","./src/app/Services/olvidemicontrasena.service.ts","./src/app/olvide-mi-contrasena/olvide-mi-contrasena-routing.module.ts","./src/app/olvide-mi-contrasena/olvide-mi-contrasena.module.ts","./src/app/olvide-mi-contrasena/olvide-mi-contrasena.page.ts","./src/app/olvide-mi-contrasena/olvide-mi-contrasena.page.scss","./src/app/olvide-mi-contrasena/olvide-mi-contrasena.page.html"],"names":[],"mappings":"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","file":"src_app_olvide-mi-contrasena_olvide-mi-contrasena_module_ts.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { HttpClientModule } from '@angular/common/http';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class EnviarCorreoService {\n\n  constructor(public http: HttpClient) { }\n\n  EnviarCorreo(email:string, subject:string, message:string){\n    return this.http.get(\"http://api.miscalleslimpiasrd.tecnolora.com/api/MisCallesLimpiasRD/Enviarcorreo?email=\"+email+\"&subject=\"+subject+\"&message=\"+message+\"\");\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { HttpClientModule } from '@angular/common/http';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class OlvidemicontrasenaService {\n\n  constructor(public http: HttpClient) { }\n\n  UContrasenaOlvidada(email:string,clave_nueva:string){\n    return this.http.get(\"http://api.miscalleslimpiasrd.tecnolora.com/api/MisCallesLimpiasRD/UContrasenaOlvidada?correo_Usuario=\"+email+\"&clave_nueva=\"+clave_nueva+\"\");\n  }\n\n//   return this.http.get(\"https://localhost:44371/api/MisCallesLimpiasRD/UContrasenaOlvidada/\"+email+\"/\"+clave_nueva+\"\");\n// }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { OlvideMiContrasenaPage } from './olvide-mi-contrasena.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: OlvideMiContrasenaPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class OlvideMiContrasenaPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { OlvideMiContrasenaPageRoutingModule } from './olvide-mi-contrasena-routing.module';\n\nimport { OlvideMiContrasenaPage } from './olvide-mi-contrasena.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    OlvideMiContrasenaPageRoutingModule\n  ],\n  declarations: [OlvideMiContrasenaPage]\n})\nexport class OlvideMiContrasenaPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { OlvidemicontrasenaService } from '../Services/olvidemicontrasena.service';\nimport { EnviarCorreoService } from '../Services/enviar-correo.service';\nimport { AlertController } from '@ionic/angular';\nimport { isNull } from '@angular/compiler/src/output/output_ast';\nimport { empty } from 'rxjs';\nimport { EmailComposer } from '@ionic-native/email-composer/ngx';\nimport { HttpClientModule } from '@angular/common/http';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError, retry } from 'rxjs/operators';\nimport { HttpHeaders } from '@angular/common/http';\n\n@Component({\n  selector: 'app-olvide-mi-contrasena',\n  templateUrl: './olvide-mi-contrasena.page.html',\n  styleUrls: ['./olvide-mi-contrasena.page.scss'],\n})\nexport class OlvideMiContrasenaPage implements OnInit {\n  clave_nueva;\n  result = \"\";\n  public datos:any;\n  email;\n\n  constructor(\n    private http: HttpClient,\n    private emailComposer: EmailComposer,\n    public servicio:OlvidemicontrasenaService,\n    public servicio1:EnviarCorreoService,\n    public alertController: AlertController\n  ) { }\n\n  sendEmail() {\n    let email,subject, message;\n    email = this.email;\n    subject = \"RESTABLECIMIENTO DE CONTRASEÑA\";\n    message = \"Hola, se solicito un restablecimiento de contraseña para tu cuenta: \" + this.email + \"<p></p>\" +\n    \" Si tú no realizaste la solicitud de cambio de contraseña, ignora este correo. <p></p>\" +\n    \"su nueva contraseña es: \" + this.datos.clave\n\n  \n\n    this.servicio1.EnviarCorreo(email,subject, message).subscribe((data)=>{\n      this.datos = data;\n      if (this.datos == \"OK\")\n      {\n        this.CorreoSuccess();\n        this.email = null;\n      }\n      else\n      {\n        this.ErrorAlert();\n      }\n    },\n    (error)=>{\n      alert(error);\n    });\n\n  }\n  \n  ngOnInit() {\n  \n  }\n\n  async CorreoSuccess() {\n    const alert = await this.alertController.create({\n      cssClass: 'my-custom-class',\n      header: 'Contraseña enviada',\n      message: 'Su Contraseña ha sido enviada al correo ',\n      buttons: ['OK']\n    });\n    await alert.present();\n  }\n\n  async SuccesAlert() {\n    const alert = await this.alertController.create({\n      cssClass: 'my-custom-class',\n      header: 'Contraseña Restablecida con Exito',\n      message: 'Su Contraseña es: ' + this.datos.clave,\n      buttons: ['OK']\n    });\n    await alert.present();\n  }\n\n  async EmailVacio() {\n      const alert = await this.alertController.create({\n      cssClass: 'my-custom-class',\n      header: 'Correo Incorrecto',\n      message: 'Debe ingresar un correo para poder realizar el cambio de contraseña',\n      buttons: ['OK']\n    });\n    await alert.present();\n    }\n\n  async ErrorAlert() {\n    const alert = await this.alertController.create({\n      cssClass: 'my-custom-class',\n      header: 'Error',\n      message: 'No se pudo restablecer la contraseña',\n      buttons: ['OK']\n    });\n    await alert.present();\n  }\n\n  async LlenarCamposAlert() {\n    const alert = await this.alertController.create({\n      cssClass: 'my-custom-class',\n      header: 'Error',\n      message: 'Por favor llene los campos necesarios',\n      buttons: ['OK']\n    });\n    await alert.present();\n  }\n\n\n  onOlvideMiContrasena(){\n\n    let emailContenido= ((document.getElementById(\"emailContenido\") as HTMLInputElement).value);\n\n    if (emailContenido.length==0){\n      this.EmailVacio();\n      \n      return;\n    }\n    const characters = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n    const charactersLength = 4;\n    this.result = \"\";\n    for (let i = 0; i < charactersLength; i++) {\n       this.result += characters.charAt(Math.floor(Math.random() * charactersLength));\n    }\n   \n    let email\n    email = this.email;\n    console.log(this.result)\n    this.servicio.UContrasenaOlvidada(email,this.result).subscribe((data)=>{\n      this.datos = data;\n      if (this.datos.respuesta == \"OK\")\n      {\n       \n        this.sendEmail();\n        this.email = null;\n      }\n      else\n      {\n        this.ErrorAlert();\n      }\n    },\n    (error)=>{\n      alert(error);\n    });\n  }\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJvbHZpZGUtbWktY29udHJhc2VuYS5wYWdlLnNjc3MifQ== */\";","export default \"<ion-content>\\n  <!-- Back button with a default href -->\\n  <ion-header>\\n    <ion-toolbar>\\n        <ion-buttons slot=\\\"start\\\">\\n            <ion-back-button defaultHref=\\\"login\\\"></ion-back-button>\\n        </ion-buttons>\\n        <ion-title style=\\\"color: #1A202E; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-size:16;\\\">Restablecer contraseña</ion-title>\\n    </ion-toolbar>\\n</ion-header>\\n\\n\\n\\n<div style=\\\"padding: 15px;\\\">\\n  <!-- <ion-label style=\\\"color: #1A202E; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-size:20px;\\\"><strong>Restablecer Contraseña</strong></ion-label> <br> -->\\n  <br><span style=\\\"color: #647081; text-justify: auto; font-size: 14px;\\\">Introduzca el email asociado a su cuenta y le enviaremos un correo su nueva contraseña</span>\\n</div>\\n<ion-label style=\\\"color: #647081; padding: 15px;\\\">Email</ion-label><br>\\n<div style=\\\"padding: 5px;\\\">\\n\\n\\n  <ion-card>\\n      <!-- Agregar id para validar si está vacio -->\\n      <ion-input style=\\\"border-radius: 5px;\\\" maxlength=\\\"100\\\" [(ngModel)]=\\\"email\\\" id=\\\"emailContenido\\\"></ion-input>\\n  </ion-card>\\n\\n</div>\\n\\n\\n<div style=\\\"margin:auto; width:95%; padding-top: 20px;\\\">\\n\\n  <ion-button expand=\\\"block\\\" (click)=\\\"onOlvideMiContrasena()\\\">Enviar Contraseña</ion-button>\\n\\n</div>\\n\\n\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}