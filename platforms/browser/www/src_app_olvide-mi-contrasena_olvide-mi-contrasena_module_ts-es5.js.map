{"version":3,"sources":["webpack:///src/app/Services/enviar-correo.service.ts","webpack:///src/app/Services/olvidemicontrasena.service.ts","webpack:///src/app/olvide-mi-contrasena/olvide-mi-contrasena-routing.module.ts","webpack:///src/app/olvide-mi-contrasena/olvide-mi-contrasena.module.ts","webpack:///src/app/olvide-mi-contrasena/olvide-mi-contrasena.page.ts","webpack:///src/app/olvide-mi-contrasena/olvide-mi-contrasena.page.scss","webpack:///src/app/olvide-mi-contrasena/olvide-mi-contrasena.page.html"],"names":["EnviarCorreoService","http","email","subject","message","get","HttpClient","Injectable","providedIn","OlvidemicontrasenaService","clave_nueva","routes","path","component","OlvideMiContrasenaPage","OlvideMiContrasenaPageRoutingModule","NgModule","imports","RouterModule","exports","OlvideMiContrasenaPageModule","CommonModule","FormsModule","IonicModule","declarations","emailComposer","servicio","servicio1","alertController","result","datos","clave","EnviarCorreo","subscribe","data","CorreoSuccess","ErrorAlert","error","alert","create","cssClass","header","buttons","present","emailContenido","document","getElementById","value","length","EmailVacio","characters","charactersLength","i","charAt","Math","floor","random","console","log","UContrasenaOlvidada","respuesta","sendEmail","EmailComposer","AlertController","Component","selector","template"],"mappings":"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","file":"src_app_olvide-mi-contrasena_olvide-mi-contrasena_module_ts-es5.js","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { HttpClientModule } from '@angular/common/http';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class EnviarCorreoService {\r\n\r\n  constructor(public http: HttpClient) { }\r\n\r\n  EnviarCorreo(email:string, subject:string, message:string){\r\n    return this.http.get(\"http://api.miscalleslimpiasrd.tecnolora.com/api/MisCallesLimpiasRD/Enviarcorreo?email=\"+email+\"&subject=\"+subject+\"&message=\"+message+\"\");\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { HttpClientModule } from '@angular/common/http';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class OlvidemicontrasenaService {\r\n\r\n  constructor(public http: HttpClient) { }\r\n\r\n  UContrasenaOlvidada(email:string,clave_nueva:string){\r\n    return this.http.get(\"http://api.miscalleslimpiasrd.tecnolora.com/api/MisCallesLimpiasRD/UContrasenaOlvidada?correo_Usuario=\"+email+\"&clave_nueva=\"+clave_nueva+\"\");\r\n  }\r\n\r\n//   return this.http.get(\"https://localhost:44371/api/MisCallesLimpiasRD/UContrasenaOlvidada/\"+email+\"/\"+clave_nueva+\"\");\r\n// }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { OlvideMiContrasenaPage } from './olvide-mi-contrasena.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: OlvideMiContrasenaPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class OlvideMiContrasenaPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { OlvideMiContrasenaPageRoutingModule } from './olvide-mi-contrasena-routing.module';\r\n\r\nimport { OlvideMiContrasenaPage } from './olvide-mi-contrasena.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    OlvideMiContrasenaPageRoutingModule\r\n  ],\r\n  declarations: [OlvideMiContrasenaPage]\r\n})\r\nexport class OlvideMiContrasenaPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { OlvidemicontrasenaService } from '../Services/olvidemicontrasena.service';\r\nimport { EnviarCorreoService } from '../Services/enviar-correo.service';\r\nimport { AlertController } from '@ionic/angular';\r\nimport { isNull } from '@angular/compiler/src/output/output_ast';\r\nimport { empty } from 'rxjs';\r\nimport { EmailComposer } from '@ionic-native/email-composer/ngx';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable, throwError } from 'rxjs';\r\nimport { catchError, retry } from 'rxjs/operators';\r\nimport { HttpHeaders } from '@angular/common/http';\r\n\r\n@Component({\r\n  selector: 'app-olvide-mi-contrasena',\r\n  templateUrl: './olvide-mi-contrasena.page.html',\r\n  styleUrls: ['./olvide-mi-contrasena.page.scss'],\r\n})\r\nexport class OlvideMiContrasenaPage implements OnInit {\r\n  clave_nueva;\r\n  result = \"\";\r\n  public datos:any;\r\n  email;\r\n\r\n  constructor(\r\n    private http: HttpClient,\r\n    private emailComposer: EmailComposer,\r\n    public servicio:OlvidemicontrasenaService,\r\n    public servicio1:EnviarCorreoService,\r\n    public alertController: AlertController\r\n  ) { }\r\n\r\n  sendEmail() {\r\n    let email,subject, message;\r\n    email = this.email;\r\n    subject = \"RESTABLECIMIENTO DE CONTRASEÑA\";\r\n    message = \"Hola, se solicito un restablecimiento de contraseña para tu cuenta: \" + this.email + \"<p></p>\" +\r\n    \" Si tú no realizaste la solicitud de cambio de contraseña, ignora este correo. <p></p>\" +\r\n    \"su nueva contraseña es: \" + this.datos.clave\r\n\r\n  \r\n\r\n    this.servicio1.EnviarCorreo(email,subject, message).subscribe((data)=>{\r\n      this.datos = data;\r\n      if (this.datos == \"OK\")\r\n      {\r\n        this.CorreoSuccess();\r\n        this.email = null;\r\n      }\r\n      else\r\n      {\r\n        this.ErrorAlert();\r\n      }\r\n    },\r\n    (error)=>{\r\n      alert(error);\r\n    });\r\n\r\n  }\r\n  \r\n  ngOnInit() {\r\n  \r\n  }\r\n\r\n  async CorreoSuccess() {\r\n    const alert = await this.alertController.create({\r\n      cssClass: 'my-custom-class',\r\n      header: 'Contraseña enviada',\r\n      message: 'Su Contraseña ha sido enviada al correo ',\r\n      buttons: ['OK']\r\n    });\r\n    await alert.present();\r\n  }\r\n\r\n  async SuccesAlert() {\r\n    const alert = await this.alertController.create({\r\n      cssClass: 'my-custom-class',\r\n      header: 'Contraseña Restablecida con Exito',\r\n      message: 'Su Contraseña es: ' + this.datos.clave,\r\n      buttons: ['OK']\r\n    });\r\n    await alert.present();\r\n  }\r\n\r\n  async EmailVacio() {\r\n      const alert = await this.alertController.create({\r\n      cssClass: 'my-custom-class',\r\n      header: 'Correo Incorrecto',\r\n      message: 'Debe ingresar un correo para poder realizar el cambio de contraseña',\r\n      buttons: ['OK']\r\n    });\r\n    await alert.present();\r\n    }\r\n\r\n  async ErrorAlert() {\r\n    const alert = await this.alertController.create({\r\n      cssClass: 'my-custom-class',\r\n      header: 'Error',\r\n      message: 'No se pudo restablecer la contraseña',\r\n      buttons: ['OK']\r\n    });\r\n    await alert.present();\r\n  }\r\n\r\n  async LlenarCamposAlert() {\r\n    const alert = await this.alertController.create({\r\n      cssClass: 'my-custom-class',\r\n      header: 'Error',\r\n      message: 'Por favor llene los campos necesarios',\r\n      buttons: ['OK']\r\n    });\r\n    await alert.present();\r\n  }\r\n\r\n\r\n  onOlvideMiContrasena(){\r\n\r\n    let emailContenido= ((document.getElementById(\"emailContenido\") as HTMLInputElement).value);\r\n\r\n    if (emailContenido.length==0){\r\n      this.EmailVacio();\r\n      \r\n      return;\r\n    }\r\n    const characters = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n    const charactersLength = 4;\r\n    this.result = \"\";\r\n    for (let i = 0; i < charactersLength; i++) {\r\n       this.result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n    }\r\n   \r\n    let email\r\n    email = this.email;\r\n    console.log(this.result)\r\n    this.servicio.UContrasenaOlvidada(email,this.result).subscribe((data)=>{\r\n      this.datos = data;\r\n      if (this.datos.respuesta == \"OK\")\r\n      {\r\n       \r\n        this.sendEmail();\r\n        this.email = null;\r\n      }\r\n      else\r\n      {\r\n        this.ErrorAlert();\r\n      }\r\n    },\r\n    (error)=>{\r\n      alert(error);\r\n    });\r\n  }\r\n}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJvbHZpZGUtbWktY29udHJhc2VuYS5wYWdlLnNjc3MifQ== */\";","export default \"<ion-content>\\r\\n  <!-- Back button with a default href -->\\r\\n  <ion-header>\\r\\n    <ion-toolbar>\\r\\n        <ion-buttons slot=\\\"start\\\">\\r\\n            <ion-back-button defaultHref=\\\"login\\\"></ion-back-button>\\r\\n        </ion-buttons>\\r\\n        <ion-title style=\\\"color: #1A202E; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-size:16;\\\">Restablecer contraseña</ion-title>\\r\\n    </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n\\r\\n\\r\\n<div style=\\\"padding: 15px;\\\">\\r\\n  <!-- <ion-label style=\\\"color: #1A202E; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-size:20px;\\\"><strong>Restablecer Contraseña</strong></ion-label> <br> -->\\r\\n  <br><span style=\\\"color: #647081; text-justify: auto; font-size: 14px;\\\">Introduzca el email asociado a su cuenta y le enviaremos un correo su nueva contraseña</span>\\r\\n</div>\\r\\n<ion-label style=\\\"color: #647081; padding: 15px;\\\">Email</ion-label><br>\\r\\n<div style=\\\"padding: 5px;\\\">\\r\\n\\r\\n\\r\\n  <ion-card>\\r\\n      <!-- Agregar id para validar si está vacio -->\\r\\n      <ion-input style=\\\"border-radius: 5px;\\\" maxlength=\\\"100\\\" [(ngModel)]=\\\"email\\\" id=\\\"emailContenido\\\"></ion-input>\\r\\n  </ion-card>\\r\\n\\r\\n</div>\\r\\n\\r\\n\\r\\n<div style=\\\"margin:auto; width:95%; padding-top: 20px;\\\">\\r\\n\\r\\n  <ion-button expand=\\\"block\\\" (click)=\\\"onOlvideMiContrasena()\\\">Enviar Contraseña</ion-button>\\r\\n\\r\\n</div>\\r\\n\\r\\n\\r\\n</ion-content>\\r\\n\";"]}