{"version":3,"sources":["webpack:///src/app/Services/ion-loader.service.ts","webpack:///src/app/Services/location.service.ts","webpack:///src/app/Services/registro-reporte.service.ts","webpack:///src/app/inicio-mapa/inicio-mapa-routing.module.ts","webpack:///src/app/inicio-mapa/inicio-mapa.module.ts","webpack:///src/app/inicio-mapa/inicio-mapa.page.ts","webpack:///src/app/inicio-mapa/inicio-mapa.page.scss","webpack:///src/app/inicio-mapa/inicio-mapa.page.html"],"names":["IonLoaderService","loadingController","create","message","then","response","present","dismiss","console","log","err","LoadingController","Injectable","providedIn","LocationService","Promise","resolve","reject","navigator","geolocation","getCurrentPosition","resp","lng","coords","longitude","lat","latitude","RegistroReporteService","http","baseURL","headers","Headers","append","datos","post","HttpClient","routes","path","component","InicioMapaPage","InicioMapaPageRoutingModule","NgModule","imports","RouterModule","exports","InicioMapaPageModule","CommonModule","FormsModule","IonicModule","declarations","ionLoaderService","servicio2","servicio3","loadingCtrl","toastCtrl","alertController","nav","platform","router","camera","height","id","longitud","usuario","Variableglobal","options","quality","destinationType","DestinationType","DATA_URL","encodingType","EncodingType","JPEG","mediaType","MediaType","PICTURE","getPicture","imageData","currentImage","Reportar","ImgAlert","ready","onload","loadMap","localizar","map","GoogleMaps","target","zoom","tilt","obtenerDatosNecesarios","subscribe","data","error","alert","clear","loading","getMyLocation","location","animateCamera","latLng","marker","addMarkerSync","title","position","animation","GoogleMapsAnimation","showInfoWindow","on","GoogleMapsEvent","showToast","error_message","getPosition","pos","mensaje","duration","toast","cssClass","buttons","header","simpleLoader","cod_usuario","ubicacion","fotos","RegistroReporte","SuccesAlert","ErrorAlert","dismissLoader","DatosnecesarioService","ToastController","AlertController","NavController","Platform","Router","Camera","Component","selector","template"],"mappings":"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","file":"src_app_inicio-mapa_inicio-mapa_module_ts-es5.js","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { LoadingController } from '@ionic/angular';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class IonLoaderService {\r\n\r\n  constructor(\r\n    public loadingController: LoadingController\r\n  ) { }\r\n\r\n  simpleLoader() {\r\n    this.loadingController.create({\r\n        message: 'Loading...'\r\n    }).then((response) => {\r\n        response.present();\r\n    });\r\n\r\n    \r\n}\r\n\r\ndismissLoader() {\r\n  this.loadingController.dismiss().then((response) => {\r\n      console.log('Loader closed!', response);\r\n  }).catch((err) => {\r\n      console.log('Error occured : ', err);\r\n  });\r\n}\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class LocationService {\r\n\r\n  constructor() { }\r\n  \r\n  getPosition(): Promise<any> {\r\n    return new Promise((resolve, reject) => {\r\n        navigator.geolocation.getCurrentPosition(resp => {\r\n                resolve({lng: resp.coords.longitude, lat: resp.coords.latitude});\r\n            },\r\n            err => {\r\n                reject(err);\r\n          });\r\n    });\r\n}\r\n}\r\n","import { Injectable, TestabilityRegistry } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { RegistroService } from './registro.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class RegistroReporteService {\r\n  baseURL: string = \"http://api.miscalleslimpiasrd.tecnolora.com/api/MisCallesLimpiasRD/GuardarFotosOrden\";\r\n\r\n  constructor(public http: HttpClient) { \r\n    var headers = new Headers();\r\n    headers.append(\"Accept\", 'application/json');\r\n    headers.append('Content-Type', 'application/json' );\r\n  }\r\n  \r\n  RegistroReporte(datos:any){\r\n    return this.http.post(this.baseURL, datos);\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { InicioMapaPage } from './inicio-mapa.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: InicioMapaPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class InicioMapaPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { InicioMapaPageRoutingModule } from './inicio-mapa-routing.module';\r\n\r\nimport { InicioMapaPage } from './inicio-mapa.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    InicioMapaPageRoutingModule\r\n  ],\r\n  declarations: [InicioMapaPage]\r\n})\r\nexport class InicioMapaPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\n// import { base64StringToBlob } from 'blob-util';\r\n// import { Base64 } from '@ionic-native/base64/ngx';\r\nimport { IonLoaderService } from '../Services/ion-loader.service';\r\nimport { RegistroReporteService } from '../Services/registro-reporte.service';\r\nimport { DatosnecesarioService } from '../Services/datosnecesario.service';\r\nimport { LocationService } from '../Services/location.service';\r\nimport { Camera, CameraOptions } from '@ionic-native/camera/ngx';\r\nimport { AlertController } from '@ionic/angular';\r\nimport { Router } from \"@angular/router\"; \r\nimport {NavController, NavParams } from '@ionic/angular';\r\nimport { Variableglobal } from '../variableglobal';\r\n\r\n\r\nimport {\r\n  GoogleMaps,\r\n  GoogleMap,\r\n  GoogleMapsEvent,\r\n  Marker,\r\n  GoogleMapsAnimation,\r\n  MyLocation\r\n} from \"@ionic-native/google-maps\";\r\n\r\nimport { Platform, LoadingController, ToastController } from \"@ionic/angular\";\r\nimport { NgClass } from '@angular/common';\r\n\r\n\r\n@Component({\r\n  selector: 'app-inicio-mapa',\r\n  templateUrl: './inicio-mapa.page.html',\r\n  styleUrls: ['./inicio-mapa.page.scss'],\r\n})\r\nexport class InicioMapaPage implements OnInit {\r\n  cod_reporte;\r\n  ubicacion;\r\n  lat;\r\n  lng;\r\n  fotos;\r\n  cod_usuario;\r\n\r\n  //Prueba\r\ncod_nivel;\r\n\r\n\r\n  usuario;\r\n  currentImage: any;\r\n\r\n  datos: any;\r\n  map: GoogleMap;\r\n  loading: any;\r\n  height = 0;\r\n  id: any = '0';\r\n  value:any;\r\n  latitude: any = '0';\r\n  longitud: any = '0';\r\n  constructor( \r\n    // private base64: Base64,\r\n    private ionLoaderService: IonLoaderService,\r\n    public servicio2:DatosnecesarioService,\r\n    public servicio3:RegistroReporteService,\r\n    public LocationService:LocationService,\r\n    public loadingCtrl: LoadingController,\r\n    public toastCtrl: ToastController,\r\n    public alertController: AlertController,\r\n    private nav: NavController,\r\n    private platform: Platform,\r\n    public router: Router,\r\n     private camera: Camera\r\n ) \r\n    {\r\n      this.usuario = Variableglobal.nombre_usuario;\r\n      console.log(platform.height())\r\n      this.height = platform.height(); \r\n    }\r\n\r\n    takePicture() {\r\n\r\n      const options: CameraOptions = {\r\n        quality: 100,\r\n        destinationType: this.camera.DestinationType.DATA_URL,\r\n        encodingType: this.camera.EncodingType.JPEG,\r\n        mediaType: this.camera.MediaType.PICTURE\r\n      };\r\n  \r\n      this.camera.getPicture(options).then((imageData) => {\r\n        this.currentImage =  imageData;\r\n        this.Reportar()\r\n        this.ImgAlert();\r\n      }, (err) => {\r\n        // Handle error\r\n        console.log(\"Camera issue:\" + err);\r\n      });\r\n    }\r\n  \r\n\r\n    //Prueba\r\n    pruebaCodNivel(){\r\n        console.log(Variableglobal.cod_nivel);\r\n    }\r\n\r\n   //Aqui arriba mando por consola el codigo nivel por un metodo para ver\r\n//pero si mando otra cosa me lo devuelve correctamente\r\n\r\n\r\n    async ngOnInit() {\r\n    await this.platform.ready();\r\n    this.onload();\r\n    await this.loadMap();\r\n    await this.localizar()\r\n    }\r\n\r\n    loadMap() {\r\n      // Esta función inicializa la propiedad de clase\r\n      // map\r\n      // que va a contener el control de nuestro mapa de google\r\n  \r\n      // Para crear nuestro mapa debemos enviar como parametros\r\n      // el id del div en donde se va a renderizar el mapa (paso anterior)\r\n      // y las opciones que configuran nuestro mapa\r\n      this.map = GoogleMaps.create(\"map_canvas\", {\r\n        camera: {\r\n          target: {\r\n            lat: -2.1537488,\r\n            lng: -79.8883037\r\n          },\r\n          zoom: 18,\r\n          tilt: 30\r\n        }\r\n      });\r\n    }\r\n  \r\n    onload(){\r\n      this.servicio2.obtenerDatosNecesarios(this.usuario).subscribe((data)=>{\r\n        this.datos = data;\r\n      },\r\n      (error)=>{\r\n        alert(\"ErrorDeDatosNecesarios\");\r\n      });\r\n    }\r\n\r\n\r\n    async localizar() {\r\n      // Limpiamos todos los elementos de nuestro mapa\r\n      this.map.clear();\r\n  \r\n      // Creamos un componente de Ionic para mostrar un mensaje\r\n      // mientras obtenemos esperamos que termine el proceso de\r\n      // obtener la ubicación\r\n      this.loading = await this.loadingCtrl.create({\r\n        message: \"Espera por favor...\"\r\n      });\r\n  \r\n      // Presentamos el componente creado en el paso anterior\r\n      await this.loading.present();\r\n  \r\n      // Ejecutamos el método getMyLocation de nuestra propiedad de clase\r\n      // map\r\n      // para obtener nuestra ubicación actual\r\n      this.map\r\n        .getMyLocation()\r\n        .then((location: MyLocation) => {\r\n          // Una vez obtenida la ubicación cerramos el mensaje de diálogo\r\n          this.loading.dismiss();\r\n  \r\n          // Movemos la camara a nuestra ubicación con una pequeña animación\r\n          this.map.animateCamera({\r\n            target: location.latLng,\r\n            zoom: 17,\r\n            tilt: 30\r\n          });\r\n  \r\n          // Agregamos un nuevo marcador\r\n          let marker: Marker = this.map.addMarkerSync({\r\n            title: \"Estoy aquí!\",\r\n            // snippet: \"This plugin is awesome!\",\r\n            position: location.latLng,\r\n            animation: GoogleMapsAnimation.BOUNCE\r\n          });\r\n  \r\n          // Mostramos un InfoWindow\r\n          marker.showInfoWindow();\r\n  \r\n          // Podemos configurar un evento que se ejecute cuando\r\n          // se haya dado clic\r\n          marker.on(GoogleMapsEvent.MARKER_CLICK).subscribe(() => {\r\n            this.showToast(\"clicked!\");\r\n          });\r\n        })\r\n        .catch(error => {\r\n          // En caso de que haya un problema en obtener la\r\n          // ubicación\r\n          this.loading.dismiss();\r\n          this.showToast(error.error_message);\r\n        });\r\n    }\r\n  \r\n    Reportar() {\r\n      this.LocationService.getPosition().then(pos => {\r\n          this.latitude = pos.lat;\r\n          this.longitud = pos.lng;\r\n      });\r\n}\r\n\r\n  // Función que muestra un Toast en la parte inferior\r\n  // de la pantalla\r\n  async showToast(mensaje) {\r\n    let toast = await this.toastCtrl.create({\r\n      message: mensaje,\r\n      duration: 2000,\r\n      position: \"bottom\"\r\n    });\r\n\r\n    toast.present();\r\n  }\r\n\r\n  \r\n  async ImgAlert() {\r\n    const alert = await this.alertController.create({\r\n      cssClass: 'my-custom-class',\r\n      message: `<img src=\"data:image/jpeg;base64,${this.currentImage}\" alt=\"g-maps\" style=\"border-radius: 2px\">`,\r\n      buttons: ['OK']\r\n    });\r\n    await alert.present();\r\n  }\r\n\r\n\r\n  async ErrorAlert() {\r\n    const alert = await this.alertController.create({\r\n      cssClass: 'my-custom-class',\r\n      header: 'Error',\r\n      message: 'No se pudo guardar el reporte.',\r\n      buttons: ['OK']\r\n    });\r\n    await alert.present();\r\n  }\r\n\r\n  async SuccesAlert() {\r\n    const alert = await this.alertController.create({\r\n      cssClass: 'my-custom-class',\r\n      header: 'Enhorabuena!',\r\n      message: 'Reporte guardado con exito.',\r\n      buttons: ['OK']\r\n    });\r\n    await alert.present();\r\n  }\r\n  \r\n\r\n  onRegistroReporte(){\r\n    this.ionLoaderService.simpleLoader();\r\n    let cod_usuario, ubicacion, lat, lng, fotos;\r\n    cod_usuario = Variableglobal.cod_usuario;\r\n    ubicacion = \"Jarabacoa\";\r\n    lat = this.latitude;\r\n    lng = this.longitud;\r\n    fotos = this.currentImage; \r\n    let datos = {\r\n      \"ubicacion\": ubicacion,\r\n      \"lat\": lat,\r\n      \"lng\": lng,\r\n      \"fotos\":fotos,\r\n      \"cod_usuario\":cod_usuario\r\n    };\r\n  \r\n\r\n    this.servicio3.RegistroReporte(datos).subscribe((data)=>{\r\n      this.datos = data;\r\n      if (this.datos == true)\r\n      {\r\n        this.SuccesAlert();\r\n        \r\n        // this.onLimpiar();\r\n      }\r\n      else\r\n      {\r\n        this.ErrorAlert();\r\n      }\r\n      this.ionLoaderService.dismissLoader();\r\n\r\n    },\r\n    (error)=>{\r\n      alert(\"Error \");\r\n    });\r\n  }\r\n}\r\n","export default \"#map_canvas {\\n  width: 100%;\\n  height: 100%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluaWNpby1tYXBhLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLFdBQUE7RUFDQSxZQUFBO0FBQ0oiLCJmaWxlIjoiaW5pY2lvLW1hcGEucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiI21hcF9jYW52YXMge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgfSJdfQ== */\";","export default \"<ion-header [translucent]=\\\"true\\\">\\r\\n  <ion-toolbar>\\r\\n      <ion-buttons slot=\\\"start\\\">\\r\\n          <ion-menu-button persistent=true></ion-menu-button>\\r\\n      </ion-buttons>\\r\\n      <ion-title>Inicio</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n<ion-content>\\r\\n  <!-- <ion-card>\\r\\n      <img [src]=\\\"currentImage\\\" *ngIf=\\\"currentImage\\\">\\r\\n  </ion-card> -->\\r\\n\\r\\n  <div id=\\\"map_canvas\\\" style=\\\"z-index: 1 !important; overflow: auto !important;\\\"></div>\\r\\n  <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"start\\\" slot=\\\"fixed\\\">\\r\\n      <!-- <ion-fab-button style=\\\"margin: 10px;\\\" color=\\\"danger\\\" (click)=\\\"localizar()\\\">\\r\\n    <ion-icon name=\\\"pin\\\"></ion-icon>\\r\\n  </ion-fab-button> -->\\r\\n      <ion-fab-button style=\\\"margin: 10px;\\\" (click)=\\\"onRegistroReporte()\\\">\\r\\n          <ion-icon name=\\\"checkmark\\\"></ion-icon>\\r\\n      </ion-fab-button>\\r\\n      <ion-fab-button style=\\\"margin: 10px;\\\" (click)=\\\"takePicture()\\\">\\r\\n          <ion-icon name=\\\"camera\\\"></ion-icon>\\r\\n      </ion-fab-button>\\r\\n\\r\\n  </ion-fab>\\r\\n\\r\\n</ion-content>\";"]}